var colors;colors=["#ffffe0","#fff2cf","#ffe4be","#ffd5ae","#ffc7a0","#ffb891","#ffa984","#ff9979","#ff886e","#ff7566","#fd615f","#f5515a","#ed4056","#e23050","#d52349","#c81640","#b90c35","#aa0427","#9b0116","#8b0000"],d3.geomap={},d3.geomap.choropleth=function(){var t,n,e,r,a,o,u,f,i,s,l,c,d,p,g;return i={top:20,right:20,bottom:20,left:20},p=960,u=500,l=d3.geo.naturalEarth,n=null,e=null,r=null,window.data_by_iso={},s=null,c=null,g=null,f=function(t){return data_by_iso[t]?data_by_iso[t]:""},t=function(t){return data_by_iso[t]?n(data_by_iso[t]):"#eeeeee"},d=function(){var a,o,u,i,l,d;for(u=null,o=null,l=0,d=r.length;d>l;l++)a=r[l],i=parseFloat(a[e]),u>i&&(u=i),i>o&&(o=i),data_by_iso[a.iso3]=i;return n=d3.scale.quantize().domain([u,o]).range(d3.range(colors.length).map(function(t){return colors[t]})),c.enter().append("path").attr("class","country").attr("d",s).style("fill",function(n){return t(n.id)}).append("title").text(function(t){return t.properties.name+": "+f(t.id)})},a=function(t){var n,e;return e=t.append("svg").attr("width",p).attr("height",u),n=l().scale(p/u*155).translate([p/2.4,u/2]).precision(.1),s=d3.geo.path().projection(n),d3.json("../data/countries.topo.json",function(t,n){var r;return c=e.append("g").attr("class","countries").selectAll("path").data(topojson.feature(n,n.objects.subunits).features),r=topojson.mesh(n,n.objects.subunits,function(t,n){return t!==n}),e.insert("path").datum(r).attr("class","boundary").attr("d",s),d()})},o=function(t){return r=t.datum(),a(t)},o.update=function(){return d()},o.margin=function(t){return arguments.length?(i=t,o):i},o.width=function(t){return arguments.length?(p=t,o):p},o.height=function(t){return arguments.length?(u=t,o):u},o.projection=function(t){return arguments.length?(l=t,o):l},o.column=function(t){return arguments.length?(e=t,o):e},o};